@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- ✅ SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
    /* Background container */
    .container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh; /* Full screen height */
        background: #f4f6f9; /* Light gray background */
    }

    /* Form Box */
    .form-box {
        background: #fff;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        width: 400px;
        max-width: 90%;
    }

        .form-box h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

    .input-group {
        margin-bottom: 15px;
        position: relative;
    }

    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #555;
    }

    input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-sizing: border-box;
    }

        input:focus {
            outline: none;
            border-color: #007bff;
        }

    .toggle-password {
        position: absolute;
        right: 10px;
        top: 38px;
        cursor: pointer;
    }

    button {
        width: 100%;
        padding: 10px;
        background: #007bff;
        border: none;
        border-radius: 5px;
        color: white;
        font-weight: bold;
        cursor: pointer;
    }

        button:hover {
            background: #0056b3;
        }
</style>
<center>
    @*<div class="container">*@
    <div class="form-box">
        <h3>Reset Password</h3>
        <div class="input-group">
            <label for="old-password">Old Password</label>
            <input type="password" id="old-password" placeholder="Enter old password" required>
            <span class="toggle-password" onclick="togglePassword('old-password')">👁️</span>
        </div>
        <div class="input-group">
            <label for="new-password">New Password</label>
            <input type="password" id="new-password" placeholder="Enter new password" required>
            <span class="toggle-password" onclick="togglePassword('new-password')">👁️</span>
        </div>
        <div class="input-group">
            <label for="confirm-password">Confirm Password</label>
            <input type="password" id="confirm-password" placeholder="Confirm new password" required>
            <span class="toggle-password" onclick="togglePassword('confirm-password')">👁️</span>
        </div>
        <button onclick="resetPassword()">Submit</button>
    </div>
    <center/>

        <script>
    function togglePassword(fieldId) {
        const input = document.getElementById(fieldId);
        const icon = input.nextElementSibling;
        if (input.type === "password") {
            input.type = "text";
            icon.textContent = "🙈";
        } else {
            input.type = "password";
            icon.textContent = "👁️";
        }
    }

    function resetPassword() {
        const oldPassword = document.getElementById("old-password").value.trim();
        const newPassword = document.getElementById("new-password").value.trim();
        const confirmPassword = document.getElementById("confirm-password").value.trim();

        if (!oldPassword || !newPassword || !confirmPassword) {
            Swal.fire("Error", "Please fill all fields", "error");
            return;
        }

        if (newPassword !== confirmPassword) {
            Swal.fire("Error", "New password and confirm password do not match", "error");
            return;
        }

        fetch('@Url.Action("ResetPasswordAjax","Marketing")', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ oldPassword, newPassword, confirmPassword })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                Swal.fire({
                    title: "Success",
                    text: data.message,
                    icon: "success",
                    confirmButtonText: "OK"
                }).then(() => {
                    window.location.href = '@Url.Action("ResetPassword","Marketing")';
                });
            } else {
                Swal.fire("Error", data.message, "error");
            }
        })
        .catch(() => {
            Swal.fire("Error", "Error resetting password. Please try again.", "error");
        });
    }
        </script>
    <br />
<br/>